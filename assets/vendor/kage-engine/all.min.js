function point(t,a){this.x=t,this.y=a}function getCrossPoint(t,a,h,s,i,e,n,r){var o=s-a,M=t-h,k=-1*o*t-M*a,u=r-e,p=i-n,d=-1*u*i-p*e,c=M*u-p*o;return 0==c?!1:new point((k*p-d*M)/c,(o*d-u*k)/c)}function isCross(t,a,h,s,i,e,n,r){var o=getCrossPoint(t,a,h,s,i,e,n,r);return o?h>t&&(o.x<t||h<o.x)||t>h&&(o.x<h||t<o.x)||s>a&&(o.y<a||s<o.y)||a>s&&(o.y<s||a<o.y)?!1:n>i&&(o.x<i||n<o.x)||i>n&&(o.x<n||i<o.x)||r>e&&(o.y<e||r<o.y)||e>r&&(o.y<r||e<o.y)?!1:!0:!1}function isCrossBox(t,a,h,s,i,e,n,r){return isCross(t,a,h,s,i,e,n,e)?!0:isCross(t,a,h,s,n,e,n,r)?!0:isCross(t,a,h,s,i,r,n,r)?!0:isCross(t,a,h,s,i,e,i,r)?!0:!1}function isCrossBoxWithOthers(t,a,h,s,i,e){for(var n=0;n<t.length;n++)if(a!=n)switch(t[n][0]){case 0:case 8:case 9:break;case 6:case 7:if(isCrossBox(t[n][7],t[n][8],t[n][9],t[n][10],h,s,i,e))return!0;case 2:case 12:case 3:if(isCrossBox(t[n][5],t[n][6],t[n][7],t[n][8],h,s,i,e))return!0;default:if(isCrossBox(t[n][3],t[n][4],t[n][5],t[n][6],h,s,i,e))return!0}return!1}function isCrossWithOthers(t,a,h,s,i,e){for(var n=0;n<t.length;n++)if(a!=n)switch(t[n][0]){case 0:case 8:case 9:break;case 6:case 7:if(isCross(t[n][7],t[n][8],t[n][9],t[n][10],h,s,i,e))return!0;case 2:case 12:case 3:if(isCross(t[n][5],t[n][6],t[n][7],t[n][8],h,s,i,e))return!0;default:if(isCross(t[n][3],t[n][4],t[n][5],t[n][6],h,s,i,e))return!0}return!1}function Buhin(t){function a(t,a){this.hash[t]=a}function h(t){return this.hash[t]?this.hash[t]:""}return Buhin.prototype.push=a,Buhin.prototype.set=a,Buhin.prototype.search=h,this.hash={},this}function divide_curve(t,a,h,s,i,e,n,r,o,M){var k=.5,u=Math.floor(r.length*k),p=u/r.length,d=a+(s-a)*p,c=h+(i-h)*p,y=s+(e-s)*p,g=i+(n-i)*p,f=d+(y-d)*p,W=c+(g-c)*p;o[0]=new Array,o[1]=new Array,M[0]=new Array(6),M[1]=new Array(6);var w;for(w=0;u>=w;w++)o[0].push(r[w]);for(M[0][0]=a,M[0][1]=h,M[0][2]=d,M[0][3]=c,M[0][4]=f,M[0][5]=W,w=u;w<r.length;w++)o[1].push(r[w]);M[1][0]=f,M[1][1]=W,M[1][2]=y,M[1][3]=g,M[1][4]=e,M[1][5]=n}function find_offcurve(t,a,h,s,i){var e,n,r,o,M,k,u,p,d,c,y,g,f,W,w,l,Y=1e5,v=8,x=2;for(e=a[0][0],n=a[0][1],r=a[a.length-1][0],o=a[a.length-1][1],M=h-v;h+v>M;M+=x)for(k=s-v;s+v>k;k+=x){for(d=0,c=0,y=0;y<a.length;y++)g=y/a.length,f=(1-g)*(1-g)*e+2*g*(1-g)*M+g*g*r,W=(1-g)*(1-g)*n+2*g*(1-g)*k+g*g*o,w=2*(e-2*M+r)*g+(-2*e+2*M),l=2*(n-2*k+o)*g+(-2*n+2*k),c+=(a[d][0]-f)*(a[d][0]-f)+(a[d][1]-W)*(a[d][1]-W),c>Y&&(y=a.length),d++;Y>c&&(u=M,p=k,Y=c)}for(M=u-x+1;u+x-1>=M;M+=.5)for(k=p-x+1;p+x-1>=k;k+=.5){for(d=0,c=0,y=0;y<a.length;y++)g=y/a.length,f=(1-g)*(1-g)*e+2*g*(1-g)*M+g*g*r,W=(1-g)*(1-g)*n+2*g*(1-g)*k+g*g*o,w=2*(e-2*M+r)*g+(-2*e+2*M),l=2*(n-2*k+o)*g+(-2*n+2*k),c+=(a[d][0]-f)*(a[d][0]-f)+(a[d][1]-W)*(a[d][1]-W),c>Y&&(y=a.length),d++;Y>c&&(u=M,p=k,Y=c)}i[0]=e,i[1]=n,i[2]=u,i[3]=p,i[4]=r,i[5]=o,i[6]=Y}function get_candidate(t,a,h,s,i,e,n,r,o,M,k,u){var p,d,c,y,g,f,W,w,l,Y,v=.5;for(a[0]=new Array,a[1]=new Array,w=0;1e3>=w;w+=t.kRate)l=w/1e3,p=(1-l)*(1-l)*i+2*l*(1-l)*n+l*l*o,d=(1-l)*(1-l)*e+2*l*(1-l)*r+l*l*M,c=2*(i-2*n+o)*l+(-2*i+2*n),y=2*(e-2*r+M)*l+(-2*e+2*r),0!=c&&0!=y?(g=Math.atan(y/c*-1),f=Math.sin(g)*t.kMinWidthT,W=Math.cos(g)*t.kMinWidthT):0==c?(f=t.kMinWidthT,W=0):(f=0,W=t.kMinWidthT),Y=7==h&&0==s?Math.pow(l,v)*t.kL2RDfatten:7==h?Math.pow(l,v):7==s?Math.pow(1-l,v):k>0?(t.kMinWidthT-u/2-k/2)/(t.kMinWidthT-u/2)+k/2/(t.kMinWidthT-u)*l:1,.15>Y&&(Y=.15),f*=Y,W*=Y,0>=c&&(f=-1*f,W=-1*W),temp=new Array(2),temp[0]=p-f,temp[1]=d-W,a[0].push(temp),temp=new Array(2),temp[0]=p+f,temp[1]=d+W,a[1].push(temp)}function Kage(t){function a(t,a){var h=this.kBuhin.search(a);this.makeGlyph2(t,h)}function h(t,a){if(""!=a)for(var h=this.adjustKirikuchi(this.adjustUroko2(this.adjustUroko(this.adjustKakato(this.adjustTate(this.adjustMage(this.adjustHane(this.getEachStrokes(a)))))))),s=0;s<h.length;s++)dfDrawFont(this,t,h[s][0],h[s][1],h[s][2],h[s][3],h[s][4],h[s][5],h[s][6],h[s][7],h[s][8],h[s][9],h[s][10])}function s(t){var a=new Array;if(""!=t)for(var h=this.adjustKirikuchi(this.adjustUroko2(this.adjustUroko(this.adjustKakato(this.adjustTate(this.adjustMage(this.adjustHane(this.getEachStrokes(t)))))))),s=0;s<h.length;s++){var i=new Polygons;dfDrawFont(this,i,h[s][0],h[s][1],h[s][2],h[s][3],h[s][4],h[s][5],h[s][6],h[s][7],h[s][8],h[s][9],h[s][10]),a.push(i)}return a}function i(t){for(var a=new Array,h=t.split("$"),s=0;s<h.length;s++){var i=h[s].split(":");if(99!=Math.floor(i[0]))a.push([Math.floor(i[0]),Math.floor(i[1]),Math.floor(i[2]),Math.floor(i[3]),Math.floor(i[4]),Math.floor(i[5]),Math.floor(i[6]),Math.floor(i[7]),Math.floor(i[8]),Math.floor(i[9]),Math.floor(i[10])]);else{var e=this.kBuhin.search(i[7]);""!=e&&(a=a.concat(this.getEachStrokesOfBuhin(e,Math.floor(i[3]),Math.floor(i[4]),Math.floor(i[5]),Math.floor(i[6]),Math.floor(i[1]),Math.floor(i[2]),Math.floor(i[9]),Math.floor(i[10]))))}}return a}function e(t,a,h,s,i,e,n,r,o){var M=this.getEachStrokes(t),k=new Array,u=this.getBox(t);(0!=e||0!=n)&&(e>100?e-=200:(r=0,o=0));for(var p=0;p<M.length;p++)(0!=e||0!=n)&&(M[p][3]=c(e,r,M[p][3],u.minX,u.maxX),M[p][4]=c(n,o,M[p][4],u.minY,u.maxY),M[p][5]=c(e,r,M[p][5],u.minX,u.maxX),M[p][6]=c(n,o,M[p][6],u.minY,u.maxY),99!=M[p][0]&&(M[p][7]=c(e,r,M[p][7],u.minX,u.maxX),M[p][8]=c(n,o,M[p][8],u.minY,u.maxY),M[p][9]=c(e,r,M[p][9],u.minX,u.maxX),M[p][10]=c(n,o,M[p][10],u.minY,u.maxY))),k.push([M[p][0],M[p][1],M[p][2],a+M[p][3]*(s-a)/200,h+M[p][4]*(i-h)/200,a+M[p][5]*(s-a)/200,h+M[p][6]*(i-h)/200,a+M[p][7]*(s-a)/200,h+M[p][8]*(i-h)/200,a+M[p][9]*(s-a)/200,h+M[p][10]*(i-h)/200]);return k}function n(t){for(var a=0;a<t.length;a++)if((1==t[a][0]||2==t[a][0]||6==t[a][0])&&4==t[a][2]){var h,s;1==t[a][0]?(h=t[a][5],s=t[a][6]):2==t[a][0]?(h=t[a][7],s=t[a][8]):(h=t[a][9],s=t[a][10]);var i=1/0;100>h+18&&(i=h+18);for(var e=0;e<t.length;e++)a!=e&&1==t[e][0]&&t[e][3]==t[e][5]&&t[e][3]<h&&t[e][4]<=s&&t[e][6]>=s&&h-t[e][3]<100&&(i=Math.min(i,h-t[e][3]));i!=1/0&&(t[a][2]+=700-100*Math.floor(i/15))}return t}function r(t){for(var a=0;a<t.length;a++)if(1==t[a][0]&&0==t[a][2])for(var h=0;h<this.kAdjustUrokoLengthStep;h++){var s,i,e;if(t[a][4]==t[a][6])s=t[a][5]-this.kAdjustUrokoLine[h],i=t[a][6]-.5,e=t[a][5]-t[a][3];else{var n=Math.atan((t[a][6]-t[a][4])/(t[a][5]-t[a][3]));s=t[a][5]-this.kAdjustUrokoLine[h]*Math.cos(n)-.5*Math.sin(n),i=t[a][6]-this.kAdjustUrokoLine[h]*Math.sin(n)-.5*Math.cos(n),e=Math.sqrt((t[a][6]-t[a][4])*(t[a][6]-t[a][4])+(t[a][5]-t[a][3])*(t[a][5]-t[a][3]))}(e<this.kAdjustUrokoLength[h]||isCrossWithOthers(t,a,s,i,t[a][5],t[a][6]))&&(t[a][2]+=100*(this.kAdjustUrokoLengthStep-h),h=1/0)}return t}function o(t){for(var a=0;a<t.length;a++)if(1==t[a][0]&&0==t[a][2]&&t[a][4]==t[a][6]){for(var h=0,s=0;s<t.length;s++)a!=s&&(1==t[s][0]&&t[s][4]==t[s][6]&&!(t[a][3]+1>t[s][5]||t[a][5]-1<t[s][3])&&Math.abs(t[a][4]-t[s][4])<this.kAdjustUroko2Length||3==t[s][0]&&t[s][6]==t[s][8]&&!(t[a][3]+1>t[s][7]||t[a][5]-1<t[s][5])&&Math.abs(t[a][4]-t[s][6])<this.kAdjustUroko2Length)&&(h+=Math.pow(this.kAdjustUroko2Length-Math.abs(t[a][4]-t[s][6]),1.1));var i=100*Math.min(Math.floor(h/this.kAdjustUroko2Length),this.kAdjustUroko2Step);t[a][2]<i&&(t[a][2]=t[a][2]%100+100*Math.min(Math.floor(h/this.kAdjustUroko2Length),this.kAdjustUroko2Step))}return t}function M(t){for(var a=0;a<t.length;a++)if((1==t[a][0]||3==t[a][0]||7==t[a][0])&&t[a][3]==t[a][5])for(var h=0;h<t.length;h++)a!=h&&(1==t[h][0]||3==t[h][0]||7==t[h][0])&&t[h][3]==t[h][5]&&!(t[a][4]+1>t[h][6]||t[a][6]-1<t[h][4])&&Math.abs(t[a][3]-t[h][3])<this.kMinWidthT*this.kAdjustTateStep&&(t[a][1]+=1e3*(this.kAdjustTateStep-Math.floor(Math.abs(t[a][3]-t[h][3])/this.kMinWidthT)),t[a][1]>1e3*this.kAdjustTateStep&&(t[a][1]=t[a][1]%1e3+1e3*this.kAdjustTateStep));return t}function k(t){for(var a=0;a<t.length;a++)if(3==t[a][0]&&t[a][6]==t[a][8])for(var h=0;h<t.length;h++)a!=h&&(1==t[h][0]&&t[h][4]==t[h][6]&&!(t[a][5]+1>t[h][5]||t[a][7]-1<t[h][3])&&Math.abs(t[a][6]-t[h][4])<this.kMinWidthT*this.kAdjustMageStep||3==t[h][0]&&t[h][6]==t[h][8]&&!(t[a][5]+1>t[h][7]||t[a][7]-1<t[h][5])&&Math.abs(t[a][6]-t[h][6])<this.kMinWidthT*this.kAdjustMageStep)&&(t[a][2]+=1e3*(this.kAdjustMageStep-Math.floor(Math.abs(t[a][6]-t[h][6])/this.kMinWidthT)),t[a][2]>1e3*this.kAdjustMageStep&&(t[a][2]=t[a][2]%1e3+1e3*this.kAdjustMageStep));return t}function u(t){for(var a=0;a<t.length;a++)if(2==t[a][0]&&32==t[a][1]&&t[a][3]>t[a][5]&&t[a][4]<t[a][6])for(var h=0;h<t.length;h++)1==t[h][0]&&t[h][3]<t[a][3]&&t[h][5]>t[a][3]&&t[h][4]==t[a][4]&&t[h][4]==t[h][6]&&(t[a][1]=132,h=t.length);return t}function p(t){for(var a=0;a<t.length;a++)if(1==t[a][0]&&(13==t[a][2]||23==t[a][2]))for(var h=0;h<this.kAdjustKakatoStep;h++)isCrossBoxWithOthers(t,a,t[a][5]-this.kAdjustKakatoRangeX/2,t[a][6]+this.kAdjustKakatoRangeY[h],t[a][5]+this.kAdjustKakatoRangeX/2,t[a][6]+this.kAdjustKakatoRangeY[h+1])|t[a][6]+this.kAdjustKakatoRangeY[h+1]>200|t[a][6]-t[a][4]<this.kAdjustKakatoRangeY[h+1]&&(t[a][2]+=100*(3-h),h=1/0);return t}function d(t){var a=new Object;a.minX=200,a.minY=200,a.maxX=0,a.maxY=0;for(var h=this.getEachStrokes(t),s=0;s<h.length;s++)0!=h[s][0]&&(a.minX=Math.min(a.minX,h[s][3]),a.maxX=Math.max(a.maxX,h[s][3]),a.minY=Math.min(a.minY,h[s][4]),a.maxY=Math.max(a.maxY,h[s][4]),a.minX=Math.min(a.minX,h[s][5]),a.maxX=Math.max(a.maxX,h[s][5]),a.minY=Math.min(a.minY,h[s][6]),a.maxY=Math.max(a.maxY,h[s][6]),1!=h[s][0]&&99!=h[s][0]&&(a.minX=Math.min(a.minX,h[s][7]),a.maxX=Math.max(a.maxX,h[s][7]),a.minY=Math.min(a.minY,h[s][8]),a.maxY=Math.max(a.maxY,h[s][8]),2!=h[s][0]&&3!=h[s][0]&&4!=h[s][0]&&(a.minX=Math.min(a.minX,h[s][9]),a.maxX=Math.max(a.maxX,h[s][9]),a.minY=Math.min(a.minY,h[s][10]),a.maxY=Math.max(a.maxY,h[s][10]))));return a}function c(t,a,h,s,i){var e,n,r,o;return a+100>h?(e=s,r=s,n=a+100,o=t+100):(e=a+100,r=t+100,n=i,o=i),Math.floor((h-e)/(n-e)*(o-r)+r)}return Kage.prototype.makeGlyph=a,Kage.prototype.makeGlyph2=h,Kage.prototype.makeGlyph3=s,Kage.prototype.getEachStrokes=i,Kage.prototype.getEachStrokesOfBuhin=e,Kage.prototype.adjustHane=n,Kage.prototype.adjustUroko=r,Kage.prototype.adjustUroko2=o,Kage.prototype.adjustTate=M,Kage.prototype.adjustMage=k,Kage.prototype.adjustKirikuchi=u,Kage.prototype.adjustKakato=p,Kage.prototype.getBox=d,Kage.prototype.stretch=c,Kage.prototype.kMincho=0,Kage.prototype.kGothic=1,this.kShotai=this.kMincho,this.kRate=100,1==t?(this.kMinWidthY=1.2,this.kMinWidthT=3.6,this.kWidth=3,this.kKakato=1.8,this.kL2RDfatten=1.1,this.kMage=6,this.kUseCurve=0,this.kAdjustKakatoL=[8,5,3,1,0],this.kAdjustKakatoR=[4,3,2,1],this.kAdjustKakatoRangeX=12,this.kAdjustKakatoRangeY=[1,11,14,18],this.kAdjustKakatoStep=3,this.kAdjustUrokoX=[14,12,9,7],this.kAdjustUrokoY=[7,6,5,4],this.kAdjustUrokoLength=[13,21,30],this.kAdjustUrokoLengthStep=3,this.kAdjustUrokoLine=[13,15,18]):(this.kMinWidthY=2,this.kMinWidthT=6,this.kWidth=5,this.kKakato=3,this.kL2RDfatten=1.1,this.kMage=10,this.kUseCurve=0,this.kAdjustKakatoL=[14,9,5,2,0],this.kAdjustKakatoR=[8,6,4,2],this.kAdjustKakatoRangeX=20,this.kAdjustKakatoRangeY=[1,19,24,30],this.kAdjustKakatoStep=3,this.kAdjustUrokoX=[24,20,16,12],this.kAdjustUrokoY=[12,11,9,8],this.kAdjustUrokoLength=[22,36,50],this.kAdjustUrokoLengthStep=3,this.kAdjustUrokoLine=[22,26,30],this.kAdjustUroko2Step=3,this.kAdjustUroko2Length=40,this.kAdjustTateStep=4,this.kAdjustMageStep=5),this.kBuhin=new Buhin,this}function cdDrawCurveU(t,a,h,s,i,e,n,r,o,M,k,u){var p,d,c,y,g,f,W,w,l,Y,v,x,j,A,m,K,D,P,L,b,C,U,S,R,X,T,B,E;if(t.kShotai==t.kMincho){switch(S=k%1e3,R=u%100,X=Math.floor(k%1e4/1e3),T=Math.floor(u%1e3/100),B=Math.floor(k/1e4),E=Math.floor(u/1e3),C=t.kMinWidthT-X/2,U=t.kMinWidthT-E/2,S%100){case 0:case 7:x=-1*t.kMinWidthY*.5;break;case 1:case 2:case 6:case 22:case 32:x=0;break;case 12:x=t.kMinWidthY}switch(h==i?e>s?s-=x:s+=x:s==e?i>h?h-=x:h+=x:(p=Math.atan((e-s)/(i-h)),g=i>h?1:-1,h-=x*Math.cos(p)*g,s-=x*Math.sin(p)*g),R%100){case 0:case 1:case 7:case 9:case 15:case 14:case 17:case 5:x=0;break;case 8:x=-1*C*.5}if(n==o?M>r?M+=x:M-=x:r==M?o>n?o+=x:o-=x:(p=Math.atan((M-r)/(o-n)),g=o>n?1:-1,o+=x*Math.cos(p)*g,M+=x*Math.sin(p)*g),b=.5,Math.sqrt((o-h)*(o-h)+(M-s)*(M-s))<50&&(b+=.4*(1-Math.sqrt((o-h)*(o-h)+(M-s)*(M-s))/50)),P=new Polygon,L=new Polygon,i==n&&e==r)if(t.kUseCurve){var O=new Kage;O.kMinWidthY=t.kMinWidthY,O.kMinWidthT=C,O.kWidth=t.kWidth,O.kKakato=t.kKakato,O.kRate=10;var G=new Array(2);get_candidate(O,G,S,R,h,s,i,e,o,M,B,E);var _=new Array(2),q=new Array(2),z=new Array(2),F=new Array(2);divide_curve(O,h,s,i,e,o,M,G[0],_,z),divide_curve(O,h,s,i,e,o,M,G[1],q,F);var N=new Array(7),H=new Array(7);find_offcurve(O,_[0],z[0][2],z[0][3],N),find_offcurve(O,_[1],z[1][2],z[1][3],H),P.push(N[0],N[1]),P.push(N[2],N[3],1),P.push(N[4],N[5]),P.push(H[2],H[3],1),P.push(H[4],H[5]),L.push(q[0][0][0],q[0][0][1]),L.push(F[0][2]-(N[2]-z[0][2]),z[0][3]-(N[3]-z[0][3]),1),L.push(q[0][q[0].length-1][0],q[0][q[0].length-1][1]),L.push(F[1][2]-(H[2]-z[1][2]),z[1][3]-(H[3]-z[1][3]),1),L.push(q[1][q[1].length-1][0],q[1][q[1].length-1][1]),L.reverse(),P.concat(L),a.push(P)}else{for(v=0;1e3>=v;v+=t.kRate)d=v/1e3,c=(1-d)*(1-d)*h+2*d*(1-d)*i+d*d*o,y=(1-d)*(1-d)*s+2*d*(1-d)*e+d*d*M,f=2*(h-2*i+o)*d+(-2*h+2*i),W=2*(s-2*e+M)*d+(-2*s+2*e),0!=f&&0!=W?(Y=Math.atan(W/f*-1),w=Math.sin(Y)*C,l=Math.cos(Y)*C):0==f?(w=C,l=0):(w=0,l=C),j=7==S&&0==R?Math.pow(d,b)*t.kL2RDfatten:7==S?Math.pow(d,b):7==R?Math.pow(1-d,b):B>0||E>0?(t.kMinWidthT-B/2-(E-B)/2*d)/t.kMinWidthT:1,.15>j&&(j=.15),w*=j,l*=j,0>=f&&(w=-1*w,l=-1*l),P.push(c-w,y-l),L.push(c+w,y+l);if(132==S){for(var Q=0;;){if(L.array[Q].y<=s&&s<=L.array[Q+1].y)break;Q++}newx1=L.array[Q+1].x+(L.array[Q].x-L.array[Q+1].x)*(L.array[Q+1].y-s)/(L.array[Q+1].y-L.array[Q].y),newy1=s,newx2=P.array[0].x+(P.array[0].x-P.array[1].x)*(P.array[0].y-s)/(P.array[1].y-P.array[0].y),newy2=s;for(var I=0;Q>I;I++)L.shift();L.set(0,newx1,newy1),P.unshift(newx2,newy2)}if(22==S&&s>M){for(var Q=0;;){if(L.array[Q].y<=s&&s<=L.array[Q+1].y)break;Q++}newx1=L.array[Q+1].x+(L.array[Q].x-L.array[Q+1].x)*(L.array[Q+1].y-s)/(L.array[Q+1].y-L.array[Q].y),newy1=s,newx2=P.array[0].x+(P.array[0].x-P.array[1].x-1)*(P.array[0].y-s)/(P.array[1].y-P.array[0].y),newy2=s+1;for(var I=0;Q>I;I++)L.shift();L.set(0,newx1,newy1),P.unshift(newx2,newy2)}L.reverse(),P.concat(L),a.push(P)}else{for(v=0;1e3>=v;v+=t.kRate)d=v/1e3,c=(1-d)*(1-d)*(1-d)*h+3*d*(1-d)*(1-d)*i+3*d*d*(1-d)*n+d*d*d*o,y=(1-d)*(1-d)*(1-d)*s+3*d*(1-d)*(1-d)*e+3*d*d*(1-d)*r+d*d*d*M,f=d*d*(-3*h+9*i+-9*n+3*o)+d*(6*h+-12*i+6*n)+-3*h+3*i,W=d*d*(-3*s+9*e+-9*r+3*M)+d*(6*s+-12*e+6*r)+-3*s+3*e,0!=f&&0!=W?(Y=Math.atan(W/f*-1),w=Math.sin(Y)*C,l=Math.cos(Y)*C):0==f?(w=C,l=0):(w=0,l=C),7==S&&0==R?j=Math.pow(d,b)*t.kL2RDfatten:7==S?(j=Math.pow(d,b),j=Math.pow(j,.7)):j=7==R?Math.pow(1-d,b):1,.15>j&&(j=.15),w*=j,l*=j,0>=f&&(w=-1*w,l=-1*l),P.push(c-w,y-l),L.push(c+w,y+l);if(132==S){for(var Q=0;;){if(L.array[Q].y<=s&&s<=L.array[Q+1].y)break;Q++}newx1=L.array[Q+1].x+(L.array[Q].x-L.array[Q+1].x)*(L.array[Q+1].y-s)/(L.array[Q+1].y-L.array[Q].y),newy1=s,newx2=P.array[0].x+(P.array[0].x-P.array[1].x)*(P.array[0].y-s)/(P.array[1].y-P.array[0].y),newy2=s;for(var I=0;Q>I;I++)L.shift();L.set(0,newx1,newy1),P.unshift(newx2,newy2)}if(22==S&&h>i){for(var Q=0;;){if(L.array[Q].y<=s&&s<=L.array[Q+1].y)break;Q++}newx1=L.array[Q+1].x+(L.array[Q].x-L.array[Q+1].x)*(L.array[Q+1].y-s)/(L.array[Q+1].y-L.array[Q].y),newy1=s,newx2=P.array[0].x+(P.array[0].x-P.array[1].x-1)*(P.array[0].y-s)/(P.array[1].y-P.array[0].y),newy2=s+1;for(var I=0;Q>I;I++)L.shift();L.set(0,newx1,newy1),P.unshift(newx2,newy2)}L.reverse(),P.concat(L),a.push(P)}p=Math.atan((e-s)/(i-h)),g=i>h?1:-1,A=Math.sin(p)*g,m=Math.cos(p)*g*-1,K=Math.cos(p)*g,D=Math.sin(p)*g,12==S&&(h==o?(P=new Polygon,P.push(h-C,s),P.push(h+C,s),P.push(h-C,s-C),a.push(P)):(P=new Polygon,P.push(h-C*A,s-C*m),P.push(h+C*A,s+C*m),P.push(h-C*A-C*K,s-C*m-C*D),a.push(P)));var V,Z=0;if(0==S&&(M>=s?(V=Math.atan2(Math.abs(s-e),Math.abs(h-i))/Math.PI*2-.4,V=V>0?2*V:16*V,Z=0>V?-1:1,h==i?(P=new Polygon,P.push(h-C,s+1),P.push(h+C,s),P.push(h-C*Z,s-t.kMinWidthY*V*Z),a.push(P)):(P=new Polygon,P.push(h-C*A+1*K,s-C*m+1*D),P.push(h+C*A,s+C*m),P.push(h-C*Z*A-t.kMinWidthY*V*Z*K,s-C*Z*m-t.kMinWidthY*V*Z*D),a.push(P))):h==i?(P=new Polygon,P.push(h-C,s),P.push(h+C,s),P.push(h+C,s-t.kMinWidthY),a.push(P)):(P=new Polygon,P.push(h-C*A,s-C*m),P.push(h+C*A,s+C*m),P.push(h+C*A-t.kMinWidthY*K,s+C*m-t.kMinWidthY*D),a.push(P))),22==S&&(P=new Polygon,P.push(h-C,s-t.kMinWidthY),P.push(h,s-t.kMinWidthY-t.kWidth),P.push(h+C+t.kWidth,s+t.kMinWidthY),P.push(h+C,s+C-1),P.push(h-C,s+C+4),a.push(P)),0==S)if(M>=s){Z>0&&(V=0);var $=t.kMinWidthY*V*Z;h==i?(P=new Polygon,P.push(h+C,s-$),P.push(h+1.5*C,s+t.kMinWidthY-$),P.push(h+C-2,s+2*t.kMinWidthY+1),a.push(P)):(P=new Polygon,P.push(h+C*A-$*K,s+C*m-$*D),P.push(h+1.5*C*A+(t.kMinWidthY-1.2*$)*K,s+1.5*C*m+(t.kMinWidthY-1.2*$)*D),P.push(h+(C-2)*A+(2*t.kMinWidthY-.8*$+1)*K,s+(C-2)*m+(2*t.kMinWidthY-.8*$+1)*D),a.push(P))}else h==i?(P=new Polygon,P.push(h-C,s),P.push(h-1.5*C,s+t.kMinWidthY),P.push(h-.5*C,s+3*t.kMinWidthY),a.push(P)):(P=new Polygon,P.push(h-C*A,s-C*m),P.push(h-1.5*C*A+t.kMinWidthY*K,s+t.kMinWidthY*D-1.5*C*m),P.push(h-.5*C*A+3*t.kMinWidthY*K,s+3*t.kMinWidthY*D-.5*C*m),a.push(P));if(p=Math.atan((M-r)/(o-n)),g=o>n?1:-1,K=Math.sin(p)*g*-1,D=Math.cos(p)*g,A=Math.cos(p)*g,m=Math.sin(p)*g,(1==R||8==R||15==R)&&(n==o?(P=new Polygon,t.kUseCurve?(P.push(o-U,M),P.push(o-.9*U,M+.9*U,1),P.push(o,M+U),P.push(o+.9*U,M+.9*U,1),P.push(o+U,M)):(P.push(o-U,M),P.push(o-.7*U,M+.7*U),P.push(o,M+U),P.push(o+.7*U,M+.7*U),P.push(o+U,M)),a.push(P)):r==M?(P=new Polygon,t.kUseCurve?(P.push(o,M-U),P.push(o+.9*U,M-.9*U,1),P.push(o+U,M),P.push(o+.9*U,M+.9*U,1),P.push(o,M+U)):(P.push(o,M-U),P.push(o+.7*U,M-.7*U),P.push(o+U,M),P.push(o+.7*U,M+.7*U),P.push(o,M+U)),a.push(P)):(P=new Polygon,t.kUseCurve?(P.push(o+Math.sin(p)*U*g,M-Math.cos(p)*U*g),P.push(o+Math.cos(p)*U*.9*g+Math.sin(p)*U*.9*g,M+Math.sin(p)*U*.9*g-Math.cos(p)*U*.9*g,1),P.push(o+Math.cos(p)*U*g,M+Math.sin(p)*U*g),P.push(o+Math.cos(p)*U*.9*g-Math.sin(p)*U*.9*g,M+Math.sin(p)*U*.9*g+Math.cos(p)*U*.9*g,1),P.push(o-Math.sin(p)*U*g,M+Math.cos(p)*U*g)):(P.push(o+Math.sin(p)*U*g,M-Math.cos(p)*U*g),P.push(o+Math.cos(p)*U*.7*g+Math.sin(p)*U*.7*g,M+Math.sin(p)*U*.7*g-Math.cos(p)*U*.7*g),P.push(o+Math.cos(p)*U*g,M+Math.sin(p)*U*g),P.push(o+Math.cos(p)*U*.7*g-Math.sin(p)*U*.7*g,M+Math.sin(p)*U*.7*g+Math.cos(p)*U*.7*g),P.push(o-Math.sin(p)*U*g,M+Math.cos(p)*U*g)),a.push(P))),9==R||7==S&&0==R){var V=Math.atan2(Math.abs(M-r),Math.abs(o-n))/Math.PI*2-.6;V=V>0?8*V:3*V;var Z=0;Z=0>V?-1:1,r==M?(P=new Polygon,P.push(o,M+C*t.kL2RDfatten),P.push(o,M-C*t.kL2RDfatten),P.push(o+C*t.kL2RDfatten*Math.abs(V),M+C*t.kL2RDfatten*Z),a.push(P)):(P=new Polygon,P.push(o+C*t.kL2RDfatten*K,M+C*t.kL2RDfatten*D),P.push(o-C*t.kL2RDfatten*K,M-C*t.kL2RDfatten*D),P.push(o+C*t.kL2RDfatten*Math.abs(V)*A+C*t.kL2RDfatten*Z*K,M+C*t.kL2RDfatten*Math.abs(V)*m+C*t.kL2RDfatten*Z*D),a.push(P))}15==R&&(P=new Polygon,M>s?(P.push(o,M-C+1),P.push(o+2,M-C-5*t.kWidth),P.push(o,M-C-5*t.kWidth),P.push(o-C,M-C+1)):(P.push(o,M+C-1),P.push(o-2,M+C+5*t.kWidth),P.push(o,M+C+5*t.kWidth),P.push(o+C,M+C-1)),a.push(P)),14==R&&(P=new Polygon,P.push(o,M),P.push(o,M-C),P.push(o-4*t.kWidth*Math.min(1-T/10,Math.pow(C/t.kMinWidthT,3)),M-C),P.push(o-4*t.kWidth*Math.min(1-T/10,Math.pow(C/t.kMinWidthT,3)),M-.5*C),a.push(P))}else{for(S%10==2&&(h==i?e>s?s-=t.kWidth:s+=t.kWidth:s==e?i>h?h-=t.kWidth:h+=t.kWidth:(p=Math.atan((e-s)/(i-h)),g=i>h?1:-1,h-=t.kWidth*Math.cos(p)*g,s-=t.kWidth*Math.sin(p)*g)),S%10==3&&(h==i?e>s?s-=t.kWidth*t.kKakato:s+=t.kWidth*t.kKakato:s==e?i>h?h-=t.kWidth*t.kKakato:h+=t.kWidth*t.kKakato:(p=Math.atan((e-s)/(i-h)),g=i>h?1:-1,h-=t.kWidth*Math.cos(p)*g*t.kKakato,s-=t.kWidth*Math.sin(p)*g*t.kKakato)),R%10==2&&(n==o?M>r?M+=t.kWidth:M-=t.kWidth:r==M?o>n?o+=t.kWidth:o-=t.kWidth:(p=Math.atan((M-r)/(o-n)),g=o>n?1:-1,o+=t.kWidth*Math.cos(p)*g,M+=t.kWidth*Math.sin(p)*g)),R%10==3&&(n==o?M>r?M+=t.kWidth*t.kKakato:M-=t.kWidth*t.kKakato:r==M?o>n?o+=t.kWidth*t.kKakato:o-=t.kWidth*t.kKakato:(p=Math.atan((M-r)/(o-n)),g=o>n?1:-1,o+=t.kWidth*Math.cos(p)*g*t.kKakato,M+=t.kWidth*Math.sin(p)*g*t.kKakato)),P=new Polygon,L=new Polygon,v=0;1e3>=v;v+=t.kRate)d=v/1e3,i==n&&e==r&&(c=(1-d)*(1-d)*h+2*d*(1-d)*i+d*d*o,y=(1-d)*(1-d)*s+2*d*(1-d)*e+d*d*M,f=2*(h-2*i+o)*d+(-2*h+2*i),W=2*(s-2*e+M)*d+(-2*s+2*e)),t.kShotai==t.kMincho?(0!=f&&0!=W?(Y=Math.atan(W/f*-1),w=Math.sin(Y)*t.kMinWidthT,l=Math.cos(Y)*t.kMinWidthT):0==f?(w=t.kMinWidthT,l=0):(w=0,l=t.kMinWidthT),w*=Math.sqrt(1-d),l*=Math.sqrt(1-d)):0!=f&&0!=W?(Y=Math.atan(W/f*-1),w=Math.sin(Y)*t.kWidth,l=Math.cos(Y)*t.kWidth):0==f?(w=t.kWidth,l=0):(w=0,l=t.kWidth),0>=f&&(w=-1*w,l=-1*l),P.push(c-w,y-l),L.push(c+w,y+l);L.reverse(),P.concat(L),a.push(P)}}function cdDrawBezier(t,a,h,s,i,e,n,r,o,M,k,u){cdDrawCurveU(t,a,h,s,i,e,n,r,o,M,k,u)}function cdDrawCurve(t,a,h,s,i,e,n,r,o,M){cdDrawCurveU(t,a,h,s,i,e,i,e,n,r,o,M)}function cdDrawLine(t,a,h,s,i,e,n,r){var o,M,k,u,p,d,c,y,g,f,W,w,l,Y,v,x;if(t.kShotai==t.kMincho)if(k=h,u=s,p=i,d=e,c=n%1e3,y=r%100,g=Math.floor(n/1e3),f=Math.floor(r/100),x=t.kMinWidthT-g/2,k==p){switch(v=new Polygon(4),c){case 0:v.set(3,k-x,u-t.kMinWidthY/2),v.set(0,k+x,u+t.kMinWidthY/2);break;case 1:case 6:case 22:v.set(3,k-x,u),v.set(0,k+x,u);break;case 12:v.set(3,k-x,u-t.kMinWidthY-x),v.set(0,k+x,u-t.kMinWidthY);break;case 32:v.set(3,k-x,u-t.kMinWidthY),v.set(0,k+x,u-t.kMinWidthY)}switch(y){case 0:6==c?(v.set(2,p-x,d),v.set(1,p+x,d)):(v.set(2,p-x,d+x/2),v.set(1,p+x,d-x/2));break;case 1:v.set(2,p-x,d),v.set(1,p+x,d);break;case 13:v.set(2,p-x,d+t.kAdjustKakatoL[f]+x),v.set(1,p+x,d+t.kAdjustKakatoL[f]);break;case 23:v.set(2,p-x,d+t.kAdjustKakatoR[f]+x),v.set(1,p+x,d+t.kAdjustKakatoR[f]);break;case 24:v.set(2,p-x,d+t.kMinWidthY),v.set(1,p+x,d+t.kMinWidthY);break;case 32:v.set(2,p-x,d+t.kMinWidthY),v.set(1,p+x,d+t.kMinWidthY)}a.push(v),24==y&&(v=new Polygon,v.push(p,d+t.kMinWidthY),v.push(p+x,d-3*t.kMinWidthY),v.push(p+2*x,d-t.kMinWidthY),v.push(p+2*x,d+t.kMinWidthY),a.push(v)),13==y&&4==f&&(v=new Polygon,v.push(p-x,d-3*t.kMinWidthY),v.push(p-2*x,d),v.push(p-t.kMinWidthY,d+5*t.kMinWidthY),v.push(p+x,d+t.kMinWidthY),a.push(v)),22==c&&(v=new Polygon,v.push(k-x,u-t.kMinWidthY),v.push(k,u-t.kMinWidthY-t.kWidth),v.push(k+x+t.kWidth,u+t.kMinWidthY),v.push(k+x,u+x),v.push(k-x,u),a.push(v)),0==c&&(v=new Polygon,v.push(k+x,u+.5*t.kMinWidthY),v.push(k+x+.5*x,u+.5*t.kMinWidthY+t.kMinWidthY),v.push(k+x-2,u+.5*t.kMinWidthY+2*t.kMinWidthY+1),a.push(v)),(6==c&&0==y||1==y)&&(v=new Polygon,t.kUseCurve?(v.push(p-x,d),v.push(p-.9*x,d+.9*x,1),v.push(p,d+x),v.push(p+.9*x,d+.9*x,1),v.push(p+x,d)):(v.push(p-x,d),v.push(p-.6*x,d+.6*x),v.push(p,d+x),v.push(p+.6*x,d+.6*x),v.push(p+x,d)),a.push(v))}else if(u==d)6==c?(v=new Polygon,v.push(k,u-x),v.push(p,d-x),v.push(p,d+x),v.push(k,u+x),a.push(v),(1==y||0==y||5==y)&&(v=new Polygon,t.kUseCurve?p>k?(v.push(p,d-x),v.push(p+.9*x,d-.9*x,1),v.push(p+x,d),v.push(p+.9*x,d+.9*x,1),v.push(p,d+x)):(v.push(p,d-x),v.push(p-.9*x,d-.9*x,1),v.push(p-x,d),v.push(p-.9*x,d+.9*x,1),v.push(p,d+x)):p>k?(v.push(p,d-x),v.push(p+.6*x,d-.6*x),v.push(p+x,d),v.push(p+.6*x,d+.6*x),v.push(p,d+x)):(v.push(p,d-x),v.push(p-.6*x,d-.6*x),v.push(p-x,d),v.push(p-.6*x,d+.6*x),v.push(p,d+x)),a.push(v)),5==y&&(v=new Polygon,p>k?(v.push(p,d-x+1),v.push(p+2,d-x-t.kWidth*(4*(1-g/t.kAdjustMageStep)+1)),v.push(p,d-x-t.kWidth*(4*(1-g/t.kAdjustMageStep)+1)),v.push(p-x,d-x+1)):(v.push(p,d-x+1),v.push(p-2,d-x-t.kWidth*(4*(1-g/t.kAdjustMageStep)+1)),v.push(p,d-x-t.kWidth*(4*(1-g/t.kAdjustMageStep)+1)),v.push(p+x,d-x+1)),a.push(v))):(v=new Polygon(4),v.set(0,k,u-t.kMinWidthY),v.set(1,p,d-t.kMinWidthY),v.set(2,p,d+t.kMinWidthY),v.set(3,k,u+t.kMinWidthY),a.push(v),0==y&&(v=new Polygon,v.push(p,d-t.kMinWidthY),v.push(p-t.kAdjustUrokoX[f],d),v.push(p-t.kAdjustUrokoX[f]/2,d-t.kAdjustUrokoY[f]),a.push(v)));else if(o=Math.atan((d-u)/(p-k)),Math.abs(d-u)<Math.abs(p-k)&&6!=c&&6!=y&&!(k>p))v=new Polygon(4),v.set(0,k+Math.sin(o)*t.kMinWidthY,u-Math.cos(o)*t.kMinWidthY),v.set(1,p+Math.sin(o)*t.kMinWidthY,d-Math.cos(o)*t.kMinWidthY),v.set(2,p-Math.sin(o)*t.kMinWidthY,d+Math.cos(o)*t.kMinWidthY),v.set(3,k-Math.sin(o)*t.kMinWidthY,u+Math.cos(o)*t.kMinWidthY),a.push(v),0==y&&(v=new Polygon,v.push(p+Math.sin(o)*t.kMinWidthY,d-Math.cos(o)*t.kMinWidthY),v.push(p-Math.cos(o)*t.kAdjustUrokoX[f],d-Math.sin(o)*t.kAdjustUrokoX[f]),v.push(p-Math.cos(o)*t.kAdjustUrokoX[f]/2+Math.sin(o)*t.kAdjustUrokoX[f]/2,d-Math.sin(o)*t.kAdjustUrokoY[f]-Math.cos(o)*t.kAdjustUrokoY[f]),a.push(v));else{switch(M=k>p?-1:1,v=new Polygon(4),c){case 0:v.set(0,k+Math.sin(o)*x*M+t.kMinWidthY*Math.cos(o)*.5*M,u-Math.cos(o)*x*M+t.kMinWidthY*Math.sin(o)*.5*M),v.set(3,k-Math.sin(o)*x*M-t.kMinWidthY*Math.cos(o)*.5*M,u+Math.cos(o)*x*M-t.kMinWidthY*Math.sin(o)*.5*M);break;case 1:case 6:v.set(0,k+Math.sin(o)*x*M,u-Math.cos(o)*x*M),v.set(3,k-Math.sin(o)*x*M,u+Math.cos(o)*x*M);break;case 12:v.set(0,k+Math.sin(o)*x*M-t.kMinWidthY*Math.cos(o)*M,u-Math.cos(o)*x*M-t.kMinWidthY*Math.sin(o)*M),v.set(3,k-Math.sin(o)*x*M-(x+t.kMinWidthY)*Math.cos(o)*M,u+Math.cos(o)*x*M-(x+t.kMinWidthY)*Math.sin(o)*M);break;case 22:v.set(0,k+(x*M+1)/Math.sin(o),u+1),v.set(3,k-x*M/Math.sin(o),u);break;case 32:v.set(0,k+x*M/Math.sin(o),u),v.set(3,k-x*M/Math.sin(o),u)}switch(y){case 0:6==c?(v.set(1,p+Math.sin(o)*x*M,d-Math.cos(o)*x*M),v.set(2,p-Math.sin(o)*x*M,d+Math.cos(o)*x*M)):(v.set(1,p+Math.sin(o)*x*M-.5*x*Math.cos(o)*M,d-Math.cos(o)*x*M-.5*x*Math.sin(o)*M),v.set(2,p-Math.sin(o)*x*M+.5*x*Math.cos(o)*M,d+Math.cos(o)*x*M+.5*x*Math.sin(o)*M));break;case 1:case 5:v.set(1,p+Math.sin(o)*x*M,d-Math.cos(o)*x*M),v.set(2,p-Math.sin(o)*x*M,d+Math.cos(o)*x*M);break;case 13:v.set(1,p+Math.sin(o)*x*M+t.kAdjustKakatoL[f]*Math.cos(o)*M,d-Math.cos(o)*x*M+t.kAdjustKakatoL[f]*Math.sin(o)*M),v.set(2,p-Math.sin(o)*x*M+(t.kAdjustKakatoL[f]+x)*Math.cos(o)*M,d+Math.cos(o)*x*M+(t.kAdjustKakatoL[f]+x)*Math.sin(o)*M);break;case 23:v.set(1,p+Math.sin(o)*x*M+t.kAdjustKakatoR[f]*Math.cos(o)*M,d-Math.cos(o)*x*M+t.kAdjustKakatoR[f]*Math.sin(o)*M),v.set(2,p-Math.sin(o)*x*M+(t.kAdjustKakatoR[f]+x)*Math.cos(o)*M,d+Math.cos(o)*x*M+(t.kAdjustKakatoR[f]+x)*Math.sin(o)*M);break;case 24:v.set(1,p+x*M/Math.sin(o),d),v.set(2,p-x*M/Math.sin(o),d);break;case 32:v.set(1,p+x*M/Math.sin(o),d),v.set(2,p-x*M/Math.sin(o),d)}if(a.push(v),24==y&&(v=new Polygon,v.push(p,d+t.kMinWidthY),v.push(p+.5*x,d-4*t.kMinWidthY),v.push(p+2*x,d-t.kMinWidthY),v.push(p+2*x,d+t.kMinWidthY),a.push(v)),6!=c||0!=y&&5!=y||(v=new Polygon,t.kUseCurve?(v.push(p+Math.sin(o)*x*M,d-Math.cos(o)*x*M),v.push(p-Math.cos(o)*x*.9*M+Math.sin(o)*x*.9*M,d+Math.sin(o)*x*.9*M-Math.cos(o)*x*.9*M,1),v.push(p+Math.cos(o)*x*M,d+Math.sin(o)*x*M),v.push(p+Math.cos(o)*x*.9*M-Math.sin(o)*x*.9*M,d+Math.sin(o)*x*.9*M+Math.cos(o)*x*.9*M,1),v.push(p-Math.sin(o)*x*M,d+Math.cos(o)*x*M)):(v.push(p+Math.sin(o)*x*M,d-Math.cos(o)*x*M),v.push(p+Math.cos(o)*x*.8*M+Math.sin(o)*x*.6*M,d+Math.sin(o)*x*.8*M-Math.cos(o)*x*.6*M),v.push(p+Math.cos(o)*x*M,d+Math.sin(o)*x*M),v.push(p+Math.cos(o)*x*.8*M-Math.sin(o)*x*.6*M,d+Math.sin(o)*x*.8*M+Math.cos(o)*x*.6*M),v.push(p-Math.sin(o)*x*M,d+Math.cos(o)*x*M)),a.push(v)),6==c&&5==y&&(v=new Polygon,p>k?(v.push(p+(x-1)*Math.sin(o)*M,d-(x-1)*Math.cos(o)*M),v.push(p+2*Math.cos(o)*M+(x+5*t.kWidth)*Math.sin(o)*M,d+2*Math.sin(o)*M-(x+5*t.kWidth)*Math.cos(o)*M),v.push(p+(x+5*t.kWidth)*Math.sin(o)*M,d-(x+5*t.kWidth)*Math.cos(o)*M),v.push(p+(x-1)*Math.sin(o)*M-x*Math.cos(o)*M,d-(x-1)*Math.cos(o)*M-x*Math.sin(o)*M)):(v.push(p-(x-1)*Math.sin(o)*M,d+(x-1)*Math.cos(o)*M),v.push(p+2*Math.cos(o)*M-(x+5*t.kWidth)*Math.sin(o)*M,d+2*Math.sin(o)*M+(x+5*t.kWidth)*Math.cos(o)*M),v.push(p-(x+5*t.kWidth)*Math.sin(o)*M,d+(x+5*t.kWidth)*Math.cos(o)*M),v.push(p+(x-1)*Math.sin(o)*M-x*Math.cos(o)*M,d-(x-1)*Math.cos(o)*M-x*Math.sin(o)*M)),a.push(v)),22==c&&(v=new Polygon,v.push(k-x,u-t.kMinWidthY),v.push(k,u-t.kMinWidthY-t.kWidth),v.push(k+x+t.kWidth,u+t.kMinWidthY),v.push(k+x,u+x-1),v.push(k-x,u+x+4),a.push(v)),13==y&&4==f){v=new Polygon;var j=0;k>p&&u!=d&&(j=Math.floor((k-p)/(d-u)*3)),v.push(p+j,d-5*t.kMinWidthY),v.push(p-2*x+j,d),v.push(p-t.kMinWidthY+j,d+5*t.kMinWidthY),v.push(p+x+j,d+t.kMinWidthY),v.push(p+j,d),a.push(v)}W=Math.sin(o)*M,w=Math.cos(o)*M*-1,l=Math.cos(o)*M,Y=Math.sin(o)*M,0==c&&(v=new Polygon,v.push(k+x*W+.5*t.kMinWidthY*l,u+x*w+.5*t.kMinWidthY*Y),v.push(k+(x+.5*x)*W+(.5*t.kMinWidthY+t.kMinWidthY)*l,u+(x+.5*x)*w+(.5*t.kMinWidthY+t.kMinWidthY)*Y),v.push(k+x*W+(.5*t.kMinWidthY+2*t.kMinWidthY)*l-2*W,u+x*w+(.5*t.kMinWidthY+2*t.kMinWidthY)*Y+1*w),a.push(v))}else h==i?(s>e?(k=i,u=e,p=h,d=s,c=r,y=n):(k=h,u=s,p=i,d=e,c=n,y=r),c%10==2&&(u-=t.kWidth),y%10==2&&(d+=t.kWidth),c%10==3&&(u-=t.kWidth*t.kKakato),y%10==3&&(d+=t.kWidth*t.kKakato),v=new Polygon,v.push(k-t.kWidth,u),v.push(p-t.kWidth,d),v.push(p+t.kWidth,d),v.push(k+t.kWidth,u),a.push(v)):s==e?(h>i?(k=i,u=e,p=h,d=s,c=r,y=n):(k=h,u=s,p=i,d=e,c=n,y=r),c%10==2&&(k-=t.kWidth),y%10==2&&(p+=t.kWidth),c%10==3&&(k-=t.kWidth*t.kKakato),y%10==3&&(p+=t.kWidth*t.kKakato),v=new Polygon,v.push(k,u-t.kWidth),v.push(p,d-t.kWidth),v.push(p,d+t.kWidth),v.push(k,u+t.kWidth),a.push(v)):(h>i?(k=i,u=e,p=h,d=s,c=r,y=n):(k=h,u=s,p=i,d=e,c=n,y=r),o=Math.atan((d-u)/(p-k)),c%10==2&&(k-=t.kWidth*Math.cos(o),u-=t.kWidth*Math.sin(o)),y%10==2&&(p+=t.kWidth*Math.cos(o),d+=t.kWidth*Math.sin(o)),c%10==3&&(k-=t.kWidth*Math.cos(o)*t.kKakato,u-=t.kWidth*Math.sin(o)*t.kKakato),y%10==3&&(p+=t.kWidth*Math.cos(o)*t.kKakato,d+=t.kWidth*Math.sin(o)*t.kKakato),v=new Polygon,v.push(k+Math.sin(o)*t.kWidth,u-Math.cos(o)*t.kWidth),v.push(p+Math.sin(o)*t.kWidth,d-Math.cos(o)*t.kWidth),v.push(p-Math.sin(o)*t.kWidth,d+Math.cos(o)*t.kWidth),v.push(k-Math.sin(o)*t.kWidth,u+Math.cos(o)*t.kWidth),a.push(v))}function dfDrawFont(t,a,h,s,i,e,n,r,o,M,k,u,p){var d,c,y,g,f,W,w,l,Y,v;if(t.kShotai==t.kMincho)switch(h%100){case 0:break;case 1:i%100==4?(e==r?(Y=o>n?1:-1,d=r,f=o-t.kMage*Y):n==o?(Y=r>e?1:-1,d=r-t.kMage*Y,f=o):(v=Math.atan((o-n)/(r-e)),Y=r>e?1:-1,d=r-t.kMage*Math.cos(v)*Y,f=o-t.kMage*Math.sin(v)*Y),cdDrawLine(t,a,e,n,d,f,s,1),cdDrawCurve(t,a,d,f,r,o,r-t.kMage*((t.kAdjustTateStep+4-Math.floor(s/1e3))/(t.kAdjustTateStep+4)),o,1+(s-s%1e3),i+10)):cdDrawLine(t,a,e,n,r,o,s,i);break;case 2:i%100==4?(r==M?(d=M,f=k-t.kMage):o==k?(d=M-t.kMage,f=k):(v=Math.atan((k-o)/(M-r)),Y=M>r?1:-1,d=M-t.kMage*Math.cos(v)*Y,f=k-t.kMage*Math.sin(v)*Y),cdDrawCurve(t,a,e,n,r,o,d,f,s,1),cdDrawCurve(t,a,d,f,M,k,M-t.kMage,k,1,i+10)):5==i?cdDrawCurve(t,a,e,n,r,o,M,k,s,15):cdDrawCurve(t,a,e,n,r,o,M,k,s,i);break;case 3:i%1e3==5?(e==r?(Y=o>n?1:-1,d=r,f=o-t.kMage*Y):n==o?(Y=r>e?1:-1,d=r-t.kMage*Y,f=o):(v=Math.atan((o-n)/(r-e)),Y=r>e?1:-1,d=r-t.kMage*Math.cos(v)*Y,f=o-t.kMage*Math.sin(v)*Y),r==M?(Y=k>o?1:-1,c=r,W=o+t.kMage*Y):o==k?(Y=M>r?1:-1,c=r+t.kMage*Y,W=o):(v=Math.atan((k-o)/(M-r)),Y=M>r?1:-1,c=r+t.kMage*Math.cos(v)*Y,W=o+t.kMage*Math.sin(v)*Y),y=M,w=k,cdDrawLine(t,a,e,n,d,f,s,1),cdDrawCurve(t,a,d,f,r,o,c,W,1+10*(s-s%1e3),1+(i-i%1e3)),(M>r&&y-c>0||r>M&&c-y>0)&&cdDrawLine(t,a,c,W,y,w,6+(i-i%1e3),5)):(e==r?(Y=o>n?1:-1,d=r,f=o-t.kMage*Y):n==o?(Y=r>e?1:-1,d=r-t.kMage*Y,f=o):(v=Math.atan((o-n)/(r-e)),Y=r>e?1:-1,d=r-t.kMage*Math.cos(v)*Y,f=o-t.kMage*Math.sin(v)*Y),r==M?(Y=k>o?1:-1,c=r,W=o+t.kMage*Y):o==k?(Y=M>r?1:-1,c=r+t.kMage*Y,W=o):(v=Math.atan((k-o)/(M-r)),Y=M>r?1:-1,c=r+t.kMage*Math.cos(v)*Y,W=o+t.kMage*Math.sin(v)*Y),cdDrawLine(t,a,e,n,d,f,s,1),cdDrawCurve(t,a,d,f,r,o,c,W,1+10*(s-s%1e3),1+(i-i%1e3)),cdDrawLine(t,a,c,W,M,k,6+(i-i%1e3),i));break;case 12:cdDrawCurve(t,a,e,n,r,o,M,k,s,1),cdDrawLine(t,a,M,k,u,p,6,i);break;case 4:rate=6,14400>(M-r)*(M-r)+(k-o)*(k-o)&&(rate=Math.sqrt((M-r)*(M-r)+(k-o)*(k-o))/120*6),5==i?(e==r?(Y=o>n?1:-1,d=r,f=o-t.kMage*Y*rate):n==o?(Y=r>e?1:-1,d=r-t.kMage*Y*rate,f=o):(v=Math.atan((o-n)/(r-e)),Y=r>e?1:-1,d=r-t.kMage*Math.cos(v)*Y*rate,f=o-t.kMage*Math.sin(v)*Y*rate),r==M?(Y=k>o?1:-1,c=r,W=o+t.kMage*Y*rate):o==k?(Y=M>r?1:-1,c=r+t.kMage*Y*rate,W=o):(v=Math.atan((k-o)/(M-r)),Y=M>r?1:-1,c=r+t.kMage*Math.cos(v)*Y*rate,W=o+t.kMage*Math.sin(v)*Y*rate),y=M,w=k,cdDrawLine(t,a,e,n,d,f,s,1),cdDrawCurve(t,a,d,f,r,o,c,W,1,1),y-c>0&&cdDrawLine(t,a,c,W,y,w,6,5)):(e==r?(Y=o>n?1:-1,d=r,f=o-t.kMage*Y*rate):n==o?(Y=r>e?1:-1,d=r-t.kMage*Y*rate,f=o):(v=Math.atan((o-n)/(r-e)),Y=r>e?1:-1,d=r-t.kMage*Math.cos(v)*Y*rate,
f=o-t.kMage*Math.sin(v)*Y*rate),r==M?(Y=k>o?1:-1,c=r,W=o+t.kMage*Y*rate):o==k?(Y=M>r?1:-1,c=r+t.kMage*Y*rate,W=o):(v=Math.atan((k-o)/(M-r)),Y=M>r?1:-1,c=r+t.kMage*Math.cos(v)*Y*rate,W=o+t.kMage*Math.sin(v)*Y*rate),cdDrawLine(t,a,e,n,d,f,s,1),cdDrawCurve(t,a,d,f,r,o,c,W,1,1),cdDrawLine(t,a,c,W,M,k,6,i));break;case 6:i%100==4?(M==u?(d=u,f=p-t.kMage):k==p?(d=u-t.kMage,f=p):(v=Math.atan((p-k)/(u-M)),Y=u>M?1:-1,d=u-t.kMage*Math.cos(v)*Y,f=p-t.kMage*Math.sin(v)*Y),cdDrawBezier(t,a,e,n,r,o,M,k,d,f,s,1),cdDrawCurve(t,a,d,f,u,p,u-t.kMage,p,1,i+10)):5==i?cdDrawBezier(t,a,e,n,r,o,M,k,u,p,s,15):cdDrawBezier(t,a,e,n,r,o,M,k,u,p,s,i);break;case 7:cdDrawLine(t,a,e,n,r,o,s,1),cdDrawCurve(t,a,r,o,M,k,u,p,1+(s-s%1e3),i);break;case 9:}else switch(h%100){case 0:break;case 1:4==i?(e==r?(Y=o>n?1:-1,d=r,f=o-t.kMage*Y):n==o?(Y=r>e?1:-1,d=r-t.kMage*Y,f=o):(v=Math.atan((o-n)/(r-e)),Y=r>e?1:-1,d=r-t.kMage*Math.cos(v)*Y,f=o-t.kMage*Math.sin(v)*Y),cdDrawLine(t,a,e,n,d,f,s,1),cdDrawCurve(t,a,d,f,r,o,r-2*t.kMage,o-.5*t.kMage,1,0)):cdDrawLine(t,a,e,n,r,o,s,i);break;case 2:case 12:4==i?(r==M?(d=M,f=k-t.kMage):o==k?(d=M-t.kMage,f=k):(v=Math.atan((k-o)/(M-r)),Y=M>r?1:-1,d=M-t.kMage*Math.cos(v)*Y,f=k-t.kMage*Math.sin(v)*Y),cdDrawCurve(t,a,e,n,r,o,d,f,s,1),cdDrawCurve(t,a,d,f,M,k,M-2*t.kMage,k-.5*t.kMage,1,0)):5==i?(d=M+t.kMage,f=k,c=d+.5*t.kMage,W=k-2*t.kMage,cdDrawCurve(t,a,e,n,r,o,M,k,s,1),cdDrawCurve(t,a,M,k,d,f,c,W,1,0)):cdDrawCurve(t,a,e,n,r,o,M,k,s,i);break;case 3:5==i?(e==r?(Y=o>n?1:-1,d=r,f=o-t.kMage*Y):n==o?(Y=r>e?1:-1,d=r-t.kMage*Y,f=o):(v=Math.atan((o-n)/(r-e)),Y=r>e?1:-1,d=r-t.kMage*Math.cos(v)*Y,f=o-t.kMage*Math.sin(v)*Y),r==M?(Y=k>o?1:-1,c=r,W=o+t.kMage*Y):o==k?(Y=M>r?1:-1,c=r+t.kMage*Y,W=o):(v=Math.atan((k-o)/(M-r)),Y=M>r?1:-1,c=r+t.kMage*Math.cos(v)*Y,W=o+t.kMage*Math.sin(v)*Y),y=M-t.kMage,w=k,g=M+.5*t.kMage,l=k-2*t.kMage,cdDrawLine(t,a,e,n,d,f,s,1),cdDrawCurve(t,a,d,f,r,o,c,W,1,1),cdDrawLine(t,a,c,W,y,w,1,1),cdDrawCurve(t,a,y,w,M,k,g,l,1,0)):(e==r?(Y=o>n?1:-1,d=r,f=o-t.kMage*Y):n==o?(Y=r>e?1:-1,d=r-t.kMage*Y,f=o):(v=Math.atan((o-n)/(r-e)),Y=r>e?1:-1,d=r-t.kMage*Math.cos(v)*Y,f=o-t.kMage*Math.sin(v)*Y),r==M?(Y=k>o?1:-1,c=r,W=o+t.kMage*Y):o==k?(Y=M>r?1:-1,c=r+t.kMage*Y,W=o):(v=Math.atan((k-o)/(M-r)),Y=M>r?1:-1,c=r+t.kMage*Math.cos(v)*Y,W=o+t.kMage*Math.sin(v)*Y),cdDrawLine(t,a,e,n,d,f,s,1),cdDrawCurve(t,a,d,f,r,o,c,W,1,1),cdDrawLine(t,a,c,W,M,k,1,i));break;case 6:5==i?(d=u-t.kMage,f=p,c=u+.5*t.kMage,W=p-2*t.kMage,cdDrawBezier(t,a,e,n,r,o,M,k,d,f,s,1),cdDrawCurve(t,a,d,f,u,p,c,W,1,0)):cdDrawBezier(t,a,e,n,r,o,M,k,u,p,s,i);break;case 7:cdDrawLine(t,a,e,n,r,o,s,1),cdDrawCurve(t,a,r,o,M,k,u,p,1,i);break;case 9:}}function Polygon(t){function a(t,a,h){var s=new Object;s.x=Math.floor(10*t)/10,s.y=Math.floor(10*a)/10,1!=h&&(h=0),s.off=h,this.array.push(s)}function h(t,a,h,s){this.array[t].x=Math.floor(10*a)/10,this.array[t].y=Math.floor(10*h)/10,1!=s&&(s=0),this.array[t].off=s}function s(){this.array.reverse()}function i(t){this.array=this.array.concat(t.array)}function e(){this.array.shift()}function n(t,a,h){var s=new Object;s.x=Math.floor(10*t)/10,s.y=Math.floor(10*a)/10,1!=h&&(h=0),s.off=h,this.array.unshift(s)}if(Polygon.prototype.push=a,Polygon.prototype.set=h,Polygon.prototype.reverse=s,Polygon.prototype.concat=i,Polygon.prototype.shift=e,Polygon.prototype.unshift=n,this.array=new Array,t)for(var r=0;t>r;r++)this.push(0,0,0);return this}function Polygons(){function t(){this.array=new Array}function a(t){for(var a=200,h=0,s=200,i=0,e=0,n=0;n<t.array.length;n++)t.array[n].x<a&&(a=t.array[n].x),t.array[n].x>h&&(h=t.array[n].x),t.array[n].y<s&&(s=t.array[n].y),t.array[n].y>i&&(i=t.array[n].y),(isNaN(t.array[n].x)||isNaN(t.array[n].y))&&e++;if(0==e&&a!=h&&s!=i&&t.array.length>=3){var r=new Array;for(r.push(t.array.shift());0!=t.array.length;){var o=t.array.shift();r.push(o)}r.length>=3&&(t.array=r,this.array.push(t))}}function h(t){var a="";if(a+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full" viewBox="0 0 200 200" width="200" height="200">\n',t){for(var h=0;h<this.array.length;h++){var s="L";a+='<path d="M ',a+=this.array[h].array[0].x+","+this.array[h].array[0].y+" ";for(var i=1;i<this.array[h].array.length;i++)1==this.array[h].array[i].off?(a+="Q ",s="Q"):"Q"==s&&1!=this.array[h].array[i-1].off?a+="L ":"L"==s&&1==i&&(a+="L "),a+=this.array[h].array[i].x+","+this.array[h].array[i].y+" ";a+='Z" fill="black" />\n'}a+="</svg>\n"}else{a+='<g fill="black">\n';for(var h=0;h<this.array.length;h++){a+='<polygon points="';for(var i=0;i<this.array[h].array.length;i++)a+=this.array[h].array[i].x+","+this.array[h].array[i].y+" ";a+='" />\n'}a+="</g>\n",a+="</svg>\n"}return a}function s(){var t="";t+="%!PS-Adobe-3.0 EPSF-3.0\n",t+="%%BoundingBox: 0 -208 1024 816\n",t+="%%Pages: 0\n",t+="%%Title: Kanji glyph\n",t+="%%Creator: GlyphWiki powered by KAGE system\n",t+="%%CreationDate: "+new Date+"\n",t+="%%EndComments\n",t+="%%EndProlog\n";for(var a=0;a<this.array.length;a++){for(var h=0;h<this.array[a].array.length;h++)t+=5*this.array[a].array[h].x+" "+(1e3-5*this.array[a].array[h].y-200)+" ",t+=0==h?"newpath\nmoveto\n":"lineto\n";t+="closepath\nfill\n"}return t+="%%EOF\n"}return Polygons.prototype.clear=t,Polygons.prototype.push=a,Polygons.prototype.generateSVG=h,Polygons.prototype.generateEPS=s,this.array=new Array,this}